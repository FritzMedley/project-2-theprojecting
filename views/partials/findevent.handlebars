<link rel="stylesheet" href="css/activities.css">
<link rel="stylesheet" href="css/find.css">
<header>
{{> navbar}}
</header>
<div id="titleDiv">
<h1>Find an Event</h1>
<br>
<br>
</div>
<div class="findContainer">
<form action="/findevent" method="GET">
  <div class="form-group event-field">
    <label for="location">Location:</label>
    <input type="name" class="form-control" id="location" placeholder="Austin, TX">
  </div>
  <div class="form-group event-field">
    <label for="numAttendees">Number of Attendees:</label>
    <input type="name" class="form-control" id="numAttendees" placeholder="50">
  </div>
   <div class="form-group event-field">
    <label for="date">Date:</label>
    <ul class="dateList">
     <li> <select class="form-control" id="month" place-holder="Month">
        <option>January</option>
        <option>February</option>
        <option>March</option>
        <option>April</option>
        <option>May</option>
        <option>June</option>
        <option>July</option>
        <option>August</option>
        <option>September</option>
        <option>October</option>
        <option>November</option>
        <option>December</option>
      </select></li>
      <li> <select class="form-control" id="day">        
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
        <option>13</option>
        <option>14</option>
        <option>15</option>
        <option>16</option>
        <option>17</option>
        <option>18</option>
        <option>19</option>
        <option>20</option>
        <option>21</option>
        <option>22</option>
        <option>23</option>
        <option>24</option>
        <option>25</option>
        <option>26</option>
        <option>27</option>
        <option>28</option>
        <option>29</option>
        <option>30</option>
        <option>31</option>
      </select></li>
      <li> <select class="form-control" id="year">
        <option>2017</option>
        <option>2018</option>
        <option>2019</option>
        <option>2020</option>
        <option>2021</option>
        <option>2022</option>
        <option>2023</option>
        <option>2024</option>
      </select></li>
  </div>
  <div class="form-group event-field">
    <label for="category">Category:</label>
    <select class="form-control" id="category">
      <option>Music</option>
      <option>Sports</option>
      <option>Education</option>
      <option>Parties</option>
      <option>Games</option>
      <option>Travel</option>
      <option>Clubs</option>
      <option>Other</option>
    </select>
  </div>
   <div class="form-group event-field">
  <ul class="timeList">
    <li><label for="startTime">Start Time:</label>
    <select class="form-control" id="startTime">
      <option>12:00AM</option>
      <option>12:30AM</option>
      <option>1:00AM</option>
      <option>1:30AM</option>
      <option>2:00AM</option>
      <option>3:00AM</option>
      <option>3:30AM</option>
      <option>4:00AM</option>
      <option>4:30AM</option>
      <option>5:00AM</option>
      <option>5:30AM</option>
      <option>6:00AM</option>
      <option>6:30AM</option>
      <option>7:00AM</option>
      <option>7:30AM</option>
      <option>8:00AM</option>
      <option>8:30AM</option>
      <option>9:00AM</option>
      <option>9:30AM</option>
      <option>10:00AM</option>
      <option>10:30AM</option>
      <option>11:00AM</option>
      <option>11:30AM</option>
      <option>12:00PM</option>
      <option>12:30PM</option>
      <option>1:00PM</option>
      <option>1:30PM</option>
      <option>2:00PM</option>
      <option>2:30PM</option>
      <option>3:00PM</option>
      <option>3:30PM</option>
      <option>4:00PM</option>
      <option>4:30PM</option>
      <option>5:00PM</option>
      <option>5:30PM</option>
      <option>6:00PM</option>
      <option>6:30PM</option>
      <option>7:00PM</option>
      <option>7:30PM</option>
      <option>8:00PM</option>
      <option>8:30PM</option>
      <option>9:00PM</option>
      <option>9:30PM</option>
      <option>10:00PM</option>
      <option>10:30PM</option>
      <option>11:00PM</option>
      <option>11:30PM</option>
    </select>
    </li>
    <li><label for="endTime">End Time</label>
    <select class="form-control" id="endTime">
      <option>12:00AM</option>
      <option>12:30AM</option>
      <option>1:00AM</option>
      <option>1:30AM</option>
      <option>2:00AM</option>
      <option>3:00AM</option>
      <option>3:30AM</option>
      <option>4:00AM</option>
      <option>4:30AM</option>
      <option>5:00AM</option>
      <option>5:30AM</option>
      <option>6:00AM</option>
      <option>6:30AM</option>
      <option>7:00AM</option>
      <option>7:30AM</option>
      <option>8:00AM</option>
      <option>8:30AM</option>
      <option>9:00AM</option>
      <option>9:30AM</option>
      <option>10:00AM</option>
      <option>10:30AM</option>
      <option>11:00AM</option>
      <option>11:30AM</option>
      <option>12:00PM</option>
      <option>12:30PM</option>
      <option>1:00PM</option>
      <option>1:30PM</option>
      <option>2:00PM</option>
      <option>2:30PM</option>
      <option>3:00PM</option>
      <option>3:30PM</option>
      <option>4:00PM</option>
      <option>4:30PM</option>
      <option>5:00PM</option>
      <option>5:30PM</option>
      <option>6:00PM</option>
      <option>6:30PM</option>
      <option>7:00PM</option>
      <option>7:30PM</option>
      <option>8:00PM</option>
      <option>8:30PM</option>
      <option>9:00PM</option>
      <option>9:30PM</option>
      <option>10:00PM</option>
      <option>10:30PM</option>
      <option>11:00PM</option>
      <option>11:30PM</option>
    </select>
    </li>
    </ul>
  </div>
  <br>
  <input type="submit" id="submitButton" value="Submit Form" class="btn btn-primary">
</form>
</div>
<div class="eventDiv container">
     
</div>

  <script type="text/javascript">
  $("#submitButton").on("click", function(e){
  e.preventDefault();
  var reqObject = {}
 
  reqObject.location = $("#location").val().trim();
  console.log(reqObject);

function createEventDiv(event) {

  var eventDiv = $("<div>")
  eventDiv.attr("class", "row");
  eventDiv.html("<div class='col-md-4 event-image-container'><img src='images/concert.jpg'><div><h4 id='event-attendees'>"
    +(event.numAttendees - event.numGoing)
    +" Spots Remaining! </h4><br><a href='/event?id="
    +event.id
    +"&join=true'><input type='submit' id='joinButton' class='cd btn' value='Join Event'></a></div></div><div class='col-md-6 event-info-container'><h2 id='event-title'>"
    +event.name
    +'</h2><br><span id="event-times">Time: '
    +event.startTime 
    + ' - '
    +event.endTime
    +' </span><br><span id="event-date">   Date:  '
    +event.date 
    +'</span><br><span id="event-category">Category: '
    +event.category
    +'</span><hr><p id="event-description">'
    +event.description
    +'</p></div></div>');
  return eventDiv;
}

 $.get("api/events", reqObject, function(response){
    for (var i = 0; i < response.length; i++) {
      console.log(response[i]);
      $(".eventDiv").append(createEventDiv(response[i]));
    }
});
  
     // if (response.redirect) {
     //    window.location.replace(response.redirect, response.hbs);
     //    console.log(response.hbs.event);
     //    console.log(response.db);
     // }
     // else {
     //    window.location.replace(response.redirect);
     // }
   

});
</script>

